<nav class="navbar navbar-light bg-light" [style.height]="'3vh'">
  <span [style.position]="'fixed'" [style.top]="'1px'"
    >angular pdf highlighter <strong>DEMO</strong></span
  >
</nav>
<div style="width: 100vw; height: 97vh; background: rgb(219, 219, 219);">
  <as-split direction="horizontal">
    <as-split-area class="scrollBar" [size]="70" minSize="40" maxSize="85">
      <lib-pdf-highlighter
        #pdfViewer
        (new-highlight-created)="handleNewHighlight($event)"
        (new-pdfdocumentwithhighlights-created)="handleNewDocument($event)"
      ></lib-pdf-highlighter>
    </as-split-area>
    <as-split-area class="scrollBar" [size]="30" minSize="15" maxSize="60">
      <div class="container mt-1">
        <div class="btn-group shadow" role="group">
          <button
            (click)="increaseZoom()"
            type="button"
            class="btn btn-primary btn-sm"
          >
            <svg
              width="1em"
              height="1em"
              viewBox="0 0 16 16"
              class="bi bi-zoom-in"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"
              />
              <path
                d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"
              />
              <path
                fill-rule="evenodd"
                d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"
              />
            </svg>
          </button>
          <button
            (click)="decreaseZoom()"
            type="button"
            class="btn btn-primary btn-sm"
          >
            <svg
              width="1em"
              height="1em"
              viewBox="0 0 16 16"
              class="bi bi-zoom-out"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"
              />
              <path
                d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"
              />
              <path
                fill-rule="evenodd"
                d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"
              />
            </svg>
          </button>
          <button
            (click)="resetHighlights()"
            type="button"
            class="btn btn-outline-primary btn-sm"
          >
            Reset Highlights
          </button>
          <button
            (click)="setPdfDocument()"
            type="button"
            class="btn btn-outline-primary btn-sm"
          >
            Set Document
          </button>
        </div>
      </div>

      <div
        *ngFor="let highlight of highlights"
        class="card m-3 shadow"
        [style.borderColor]="highlight.color"
      >
        <div class="card-header" [style.backgroundColor]="'#fff'">
          <span class="badge" [style.backgroundColor]="highlight.color"
            >id:</span
          >
          {{ highlight.groupId }}
          <a
            [href]="'#highlight__' + highlight.id"
            class="btn btn-xs"
            [style.backgroundColor]="highlight.color"
            >Scroll</a
          >
          <button
            data-toggle="modal"
            data-target="#staticBackdrop"
            class="btn btn-xs ml-1"
            [style.backgroundColor]="highlight.color"
            (click)="setSelectedHighlightId(highlight.id)"
          >
            Add Description
          </button>
          <button
            (click)="deleteHighlight(highlight.groupId)"
            type="button"
            class="close"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="card-body">
          <!--h6 class="card-title">Text Content:</h6-->
          <p
            class="card-text text-muted blockquote m-0"
            [style.fontSize]="'10px'"
          >
            {{
              highlight.containedText.length > 95
                ? (highlight.containedText | slice: 0:95) + "..."
                : highlight.containedText
            }}
          </p>
          <div
            *ngIf="highlight.additionalInformationDisplayed"
            class="card-footer bg-transparent"
          >
            {{
              highlight.additionalInformationDisplayed.length > 150
                ? (highlight.additionalInformationDisplayed | slice: 0:150) +
                  "..."
                : highlight.additionalInformationDisplayed
            }}
          </div>
        </div>
      </div>
    </as-split-area>
  </as-split>

  <!-- Modal -->
  <div
    class="modal fade"
    id="staticBackdrop"
    data-backdrop="static"
    data-keyboard="false"
    tabindex="-1"
    aria-labelledby="staticBackdropLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"></div>
        <div class="modal-body">
          <div class="input-group">
            <div class="input-group-prepend">
              <span
                class="input-group-text"
                [style.writingMode]="'vertical-rl'"
                [style.textOrientation]="'upright'"
                >Description</span
              >
            </div>
            <textarea
              ref-textarea
              class="form-control"
              aria-label="With textarea"
            ></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
          <button
            data-dismiss="modal"
            type="button"
            class="btn btn-primary"
            (click)="addAdditionalInformation(textarea.value)"
          >
            Add
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
